{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Security scan threshold configuration for Securing Ralph Loop",

  "semgrep": {
    "enabled": true,
    "failOn": {
      "error": true,
      "warning": false,
      "info": false
    },
    "maxFindings": {
      "error": 0,
      "warning": 10,
      "info": -1
    },
    "ignoredRules": [],
    "ignoredPaths": [
      "**/test/**",
      "**/tests/**",
      "**/*.test.*",
      "**/*.spec.*",
      "**/node_modules/**",
      "**/venv/**",
      "**/.venv/**"
    ]
  },

  "remediation": {
    "maxRetries": 3,
    "rollbackOnFailure": true,
    "escalateAfterRetries": true
  },

  "iteration": {
    "maxIterations": 10,
    "timeoutSeconds": 3600,
    "pauseBetweenIterations": 5
  },

  "audit": {
    "enabled": true,
    "logPath": "state/security-audit.jsonl",
    "retentionDays": 30,
    "includeToolOutput": true
  },

  "notifications": {
    "slack": {
      "notifyOn": ["escalation", "completion", "failure"],
      "_note": "Webhook URL set via CLI: --slack-webhook URL"
    },
    "github": {
      "labels": ["security", "automated", "ralph-loop"]
    }
  },

  "baseline": {
    "enabled": true,
    "issue_labels": ["security-debt", "ralph-detected"],
    "dedup_by_file": true,
    "_note": "GitHub issue creation controlled via CLI: --no-create-issues to disable"
  }
}
